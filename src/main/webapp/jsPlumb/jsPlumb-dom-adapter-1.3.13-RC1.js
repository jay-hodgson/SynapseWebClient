(function(){var q=!!document.createElement("canvas").getContext,r=!!window.SVGAngle||document.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure","1.1"),p=function(){if(void 0==p.vml){var b=document.body.appendChild(document.createElement("div"));b.innerHTML='<v:shape id="vml_flag1" adj="1" />';var c=b.firstChild;c.style.behavior="url(#default#VML)";p.vml=c?"object"==typeof c.adj:!0;b.parentNode.removeChild(b)}return p.vml},s=function(b){var c={},m=[],g={},e={};this.register=
function(a){var d=jsPlumb.CurrentLibrary;a=d.getElementObject(a);var l=b.getId(a),f=d.getDOMElement(a);c[l]||(c[l]=a,m.push(a),g[l]={});if(f){a=d.getElementObject(f);a=d.getOffset(a);for(var h=0;h<f.childNodes.length;h++)if(3!=f.childNodes[h].nodeType){var k=d.getElementObject(f.childNodes[h]),n=b.getId(k,null,!0);n&&e[n]&&0<e[n]&&(k=d.getOffset(k),g[l][n]={id:n,offset:{left:k.left-a.left,top:k.top-a.top}})}}};this.endpointAdded=function(a){var d=jsPlumb.CurrentLibrary,l=document.body,f=b.getId(a),
h=d.getDOMElement(a).parentNode;for(e[f]=e[f]?e[f]+1:1;h!=l;){var k=b.getId(h);if(c[k]){l=d.getElementObject(h);d=d.getOffset(l);null==g[k][f]&&(a=jsPlumb.CurrentLibrary.getOffset(a),g[k][f]={id:f,offset:{left:a.left-d.left,top:a.top-d.top}});break}h=h.parentNode}};this.endpointDeleted=function(a){if(e[a.elementId]&&(e[a.elementId]--,0>=e[a.elementId]))for(var b in g)delete g[b][a.elementId]};this.getElementsForDraggable=function(a){return g[a]};this.reset=function(){c={};m=[];g={};e={}}};window.console||
(window.console={time:function(){},timeEnd:function(){},group:function(){},groupEnd:function(){},log:function(){}});window.jsPlumbAdapter={headless:!1,appendToRoot:function(b){document.body.appendChild(b)},getRenderModes:function(){return["canvas","svg","vml"]},isRenderModeAvailable:function(b){return{canvas:q,svg:r,vml:p()}[b]},getDragManager:function(b){return new s(b)},setRenderMode:function(b){var c;if(b){b=b.toLowerCase();var m=this.isRenderModeAvailable("canvas"),g=this.isRenderModeAvailable("svg"),
e=this.isRenderModeAvailable("vml");"svg"===b?g?c="svg":m?c="canvas":e&&(c="vml"):"canvas"===b&&m?c="canvas":e&&(c="vml")}return c}}})();
