jsPlumbUtil={isArray:function(a){return"[object Array]"===Object.prototype.toString.call(a)},isString:function(a){return"string"===typeof a},isBoolean:function(a){return"boolean"===typeof a},isObject:function(a){return"[object Object]"===Object.prototype.toString.call(a)},merge:function(a,b){var c=jsPlumb.extend({},a),d;for(d in b)if(null==c[d]||this.isString(b[d])||this.isBoolean(b[d]))c[d]=b[d];else if(this.isArray(b[d])&&this.isArray(c[d])){var e=[];e.push.apply(e,c[d]);e.push.apply(e,b[d]);c[d]=
e}else if(this.isObject(c[d])&&this.isObject(b[d]))for(var f in b[d])c[d][f]=b[d][f];return c},convertStyle:function(a,b){if("transparent"===a)return a;var c=a,d=function(a){return 1==a.length?"0"+a:a},e=/(rgb[a]?\()(.*)(\))/;a.match(e)&&(e=a.match(e)[2].split(","),c="#"+d(Number(e[0]).toString(16))+d(Number(e[1]).toString(16))+d(Number(e[2]).toString(16)),b||4!=e.length||(c+=d(Number(e[3]).toString(16))));return c},gradient:function(a,b){a=jsPlumbUtil.isArray(a)?a:[a.x,a.y];b=jsPlumbUtil.isArray(b)?
b:[b.x,b.y];return(b[1]-a[1])/(b[0]-a[0])},normal:function(a,b){return-1/jsPlumbUtil.gradient(a,b)},lineLength:function(a,b){a=jsPlumbUtil.isArray(a)?a:[a.x,a.y];b=jsPlumbUtil.isArray(b)?b:[b.x,b.y];return Math.sqrt(Math.pow(b[1]-a[1],2)+Math.pow(b[0]-a[0],2))},segment:function(a,b){a=jsPlumbUtil.isArray(a)?a:[a.x,a.y];b=jsPlumbUtil.isArray(b)?b:[b.x,b.y];return b[0]>a[0]?b[1]>a[1]?2:1:b[1]>a[1]?3:4},intersects:function(a,b){var c=a.x,d=a.x+a.w,e=a.y,f=a.y+a.h,g=b.x,h=b.x+b.w,k=b.y,l=b.y+b.h;return c<=
g&&g<=d&&e<=k&&k<=f||c<=h&&h<=d&&e<=k&&k<=f||c<=g&&g<=d&&e<=l&&l<=f||c<=h&&g<=d&&e<=l&&l<=f||g<=c&&c<=h&&k<=e&&e<=l||g<=d&&d<=h&&k<=e&&e<=l||g<=c&&c<=h&&k<=f&&f<=l||g<=d&&c<=h&&k<=f&&f<=l},segmentMultipliers:[null,[1,-1],[1,1],[-1,1],[-1,-1]],inverseSegmentMultipliers:[null,[-1,-1],[-1,1],[1,1],[1,-1]],pointOnLine:function(a,b,c){var d=jsPlumbUtil.gradient(a,b);b=jsPlumbUtil.segment(a,b);b=0<c?jsPlumbUtil.segmentMultipliers[b]:jsPlumbUtil.inverseSegmentMultipliers[b];var e=Math.atan(d),d=Math.abs(c*
Math.sin(e))*b[1];c=Math.abs(c*Math.cos(e))*b[0];return{x:a.x+c,y:a.y+d}},perpendicularLineTo:function(a,b,c){a=jsPlumbUtil.gradient(a,b);var d=Math.atan(-1/a);a=c/2*Math.sin(d);c=c/2*Math.cos(d);return[{x:b.x+c,y:b.y+a},{x:b.x-c,y:b.y-a}]},findWithFunction:function(a,b){if(a)for(var c=0;c<a.length;c++)if(b(a[c]))return c;return-1},indexOf:function(a,b){return jsPlumbUtil.findWithFunction(a,function(a){return a==b})},removeWithFunction:function(a,b){var c=jsPlumbUtil.findWithFunction(a,b);-1<c&&a.splice(c,
1);return-1!=c},remove:function(a,b){var c=jsPlumbUtil.indexOf(a,b);-1<c&&a.splice(c,1);return-1!=c},addWithFunction:function(a,b,c){-1==jsPlumbUtil.findWithFunction(a,c)&&a.push(b)},addToList:function(a,b,c){var d=a[b];null==d&&(d=[],a[b]=d);d.push(c);return d},EventGenerator:function(){var a={},b=this,c=["ready"];this.bind=function(d,c){jsPlumbUtil.addToList(a,d,c);return b};this.fire=function(d,e,f){if(a[d])for(var g=0;g<a[d].length;g++)if(-1!=jsPlumbUtil.findWithFunction(c,function(a){return a===
d}))a[d][g](e,f);else try{a[d][g](e,f)}catch(h){jsPlumbUtil.log("jsPlumb: fire failed for event "+d+" : "+h)}return b};this.unbind=function(c){c?delete a[c]:a={};return b};this.getListener=function(b){return a[b]}},logEnabled:!0,log:function(){if(jsPlumbUtil.logEnabled&&"undefined"!=typeof console)try{console.log(arguments[arguments.length-1])}catch(a){}},group:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.group(a)},groupEnd:function(a){jsPlumbUtil.logEnabled&&"undefined"!=
typeof console&&console.groupEnd(a)},time:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.time(a)},timeEnd:function(a){jsPlumbUtil.logEnabled&&"undefined"!=typeof console&&console.timeEnd(a)}};
